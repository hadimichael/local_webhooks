var httpreq = require('httpreq');

function LocalWebhook(options) {
	if(!options.ip) {
		throw new Error('No IP defined.');
	}
	
	this.ip = options.ip;
	
	return this;
	
}
/*
	send([callback])
*/
LocalWebhook.prototype.send = function(arg1){
	if( arguments.length == 0){
		send({
			ip: this.ip
		});
	}
	if( arguments.length == 1){
		// (cb)
		if(typeof(arg1)==="function"){
			send({
				ip: this.ip
			}, arg1);
		}
	}
}

function send(callback){
	httpreq.get(this.ip, function(err, res){
		if(callback && typeof callback === "function"){
			if(err){
				callback(err);
			} else {
				callback(res);
			}
		}
	});
}

module.exports = LocalWebhook;